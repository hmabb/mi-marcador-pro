<!DOCTYPE html>
<html>
<head>
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Condensed:wght@700&family=Roboto:wght@900&display=swap" rel="stylesheet">
    <style>
        body { background: transparent; margin: 0; padding: 20px; font-family: 'Roboto Condensed', sans-serif; overflow: hidden; }
        .board { position: fixed; bottom: 30px; left: 30px; display: flex; flex-direction: column; width: 450px; transition: 0.5s; }
        .row-t { display: flex; height: 45px; margin-bottom: 2px; }
        .name { flex: 1; display: flex; align-items: center; padding: 0 12px; font-size: 22px; text-transform: uppercase; font-weight: 900;
                text-shadow: 2px 2px 4px rgba(0,0,0,0.8); } /* Mejora Contraste */
        .pts { width: 60px; display: flex; align-items: center; justify-content: center; font-size: 32px; font-weight: 900; background: #000; color: gold; border-left: 2px solid rgba(255,255,255,0.2); }
        .hist { display: flex; background: rgba(0,0,0,0.6); }
        .set { width: 35px; display: flex; align-items: center; justify-content: center; font-size: 18px; color: #fff; font-weight: bold; border-left: 1px solid #444; }
        .foot { display: flex; height: 30px; align-items: center; border-top: 2px solid rgba(255,255,255,0.3); }
        .tim { width: 80px; height: 100%; display: flex; align-items: center; justify-content: center; background: #000; font-family: monospace; font-size: 20px; color: #00ffcc; font-weight: bold; }
        .tour { flex: 1; padding-left: 10px; font-size: 13px; color: white; text-transform: uppercase; font-weight: bold; text-shadow: 1px 1px 2px #000; }
        .ball { position: absolute; right: 8px; color: gold; filter: drop-shadow(0 0 5px black); display: none; }
        .serving .ball { display: block; animation: blink 1s infinite; }
        @keyframes blink { 50% { opacity: 0.3; } }
    </style>
</head>
<body>
    <div id="ui" class="board">
        <div id="row-h" class="row-t"><div class="name" id="n-h"></div><div class="hist" id="h-h"></div><div class="pts" id="p-h">0</div><span class="ball">üèê</span></div>
        <div id="row-a" class="row-t"><div class="name" id="n-a"></div><div class="hist" id="h-a"></div><div class="pts" id="p-a">0</div><span class="ball">üèê</span></div>
        <div class="foot" id="f"><div class="tim" id="t">00:00</div><div class="tour" id="tn"></div></div>
    </div>
    <script src="/socket.io/socket.io.js"></script>
    <script>
        const socket = io();
        socket.on('update', s => {
            document.getElementById('ui').style.opacity = s.overlayMode === 'match' ? '1' : '0';
            document.getElementById('n-h').innerText = s.homeName; document.getElementById('n-h').style.background = s.homeColor; document.getElementById('n-h').style.color = s.homeTextColor;
            document.getElementById('n-a').innerText = s.awayName; document.getElementById('n-a').style.background = s.awayColor; document.getElementById('n-a').style.color = s.awayTextColor;
            document.getElementById('p-h').innerText = s.homeScore; document.getElementById('p-a').innerText = s.awayScore;
            document.getElementById('f').style.background = s.bgColorTitle; document.getElementById('tn').innerText = s.tournamentName;
            document.getElementById('row-h').className = s.serverSide==='home'?'row-t serving':'row-t';
            document.getElementById('row-a').className = s.serverSide==='away'?'row-t serving':'row-t';
            draw(s.homeSetsHistory, 'h-h'); draw(s.awaySetsHistory, 'h-a');
        });
        socket.on('tick', d => { document.getElementById('t').innerText = fmt(d.timer); });
        function draw(data, id) { const c=document.getElementById(id); c.innerHTML=''; data.forEach(v=>{ const d=document.createElement('div'); d.className='set'; d.innerText=v; c.appendChild(d); }); }
        function fmt(s) { return Math.floor(s/60).toString().padStart(2,'0')+":"+(s%60).toString().padStart(2,'0'); }
    </script>
</body>
</html>





