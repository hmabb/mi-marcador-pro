<!DOCTYPE html>
<html>
<head>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@900&display=swap" rel="stylesheet">
    <style>
        body { background: transparent; margin: 0; padding: 20px; font-family: 'Roboto', sans-serif; color: white; text-transform: uppercase; }
        .board { display: flex; flex-direction: column; width: 650px; filter: drop-shadow(0 8px 10px rgba(0,0,0,0.5)); }
        .row { display: flex; height: 55px; margin-bottom: 2px; align-items: center; }
        .info { flex-grow: 1; display: flex; align-items: center; padding: 0 20px; font-size: 24px; }
        .logo { width: 35px; height: 35px; margin-right: 15px; object-fit: contain; }
        .sets-area { display: flex; background: #0b1422; height: 100%; }
        .set-box { width: 50px; display: flex; align-items: center; justify-content: center; font-size: 22px; border-left: 1px solid #333; color: #aaa; }
        .current { width: 70px; background: #16253d; color: #fff; font-size: 32px; font-weight: bold; }
        .footer { background: #0b1422; height: 35px; display: flex; align-items: center; justify-content: center; font-size: 16px; border-top: 1px solid #333; }
    </style>
</head>
<body>
    <div class="board" id="board">
        <div class="row">
            <div class="info" id="bg-h"><img id="logo-h" class="logo"><span id="txt-h"></span></div>
            <div class="sets-area" id="sets-h-row"></div>
            <div class="set-box current" id="pts-h">0</div>
        </div>
        <div class="row">
            <div class="info" id="bg-a"><img id="logo-a" class="logo"><span id="txt-a"></span></div>
            <div class="sets-area" id="sets-a-row"></div>
            <div class="set-box current" id="pts-a">0</div>
        </div>
        <div class="footer">VOLLEYBALL CHAMPIONSHIP | <span id="timer" style="margin-left:10px">00:00</span></div>
    </div>

    <script src="/socket.io/socket.io.js"></script>
    <script>
        const socket = io();
        socket.on('update', s => {
            document.getElementById('txt-h').innerText = s.homeName;
            document.getElementById('txt-a').innerText = s.awayName;
            document.getElementById('bg-h').style.backgroundColor = s.homeColor;
            document.getElementById('bg-a').style.backgroundColor = s.awayColor;
            document.getElementById('pts-h').innerText = s.homeScore;
            document.getElementById('pts-a').innerText = s.awayScore;
            
            if(s.homeLogo) { document.getElementById('logo-h').src = s.homeLogo; document.getElementById('logo-h').style.display='block'; }
            else document.getElementById('logo-h').style.display='none';

            // Dibujar SETS anteriores (DINÃMICO)
            renderSets(s.homeSetsHistory, 'sets-h-row');
            renderSets(s.awaySetsHistory, 'sets-a-row');
        });

        socket.on('tick', d => document.getElementById('timer').innerText = format(d.timer));

        function renderSets(history, elementId) {
            const container = document.getElementById(elementId);
            container.innerHTML = '';
            history.forEach(val => {
                const div = document.createElement('div');
                div.className = 'set-box';
                div.innerText = val;
                container.appendChild(div);
            });
        }
        function format(s) { return Math.floor(s/60).toString().padStart(2,'0') + ":" + (s%60).toString().padStart(2,'0'); }
    </script>
</body>
</html>


